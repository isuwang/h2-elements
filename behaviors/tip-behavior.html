<!--
提示语
-->
<link rel="import" href="../h2-tip.html">
<script>
  /**
   * @polymerBehavior
   */
  TipBehavior = {
    properties: {},

    hTip: {
      timeouts: {
        error: 600000,
        alert: 5000,
        success: 1500,
        msg: 1500
      },
      success: function (message, timeouts) {
        this.tip(message, "success", timeouts);
      },
      alert: function (message, timeouts) {
        this.tip(message, "alert", timeouts);
      },
      error: function (message, timeouts) {
        this.tip(message, "error", timeouts);
      },
      tip: function (message, type, timeouts) {
        let self = this;
        /**
         * 创建了h2-tip组件之后，需要将组件append到body元素上，才能初始化shadow dom元素
         */
        let a = document.createElement('h2-tip');
        a.set('type', type);
        a.set('message', message);
        document.body.appendChild(a);
        a.open();
        a.addEventListener("click", function (e) {
          a.remove();
        });
        timeouts = timeouts || self.timeouts[type];
        setTimeout(function () {
          a.remove();
        }, timeouts)
      },

      /**
       * 确认弹窗
       * @param params 配置参数
       * @param sureFn
       * @param cancelFn
       * @param type 弹窗类型 "confirm"、"prompt"
       */
      confirmDialog: function (message, okFn, noFn, type) {
        let okBtn = "确定";
        let noBtn = "取消";
        let a = document.createElement('h2-tip');
        a.set('message', message);
        a.set('okBtn', okBtn);
        a.set('noBtn', noBtn);
        a.set('type', type);
        document.body.appendChild(a);
        a.addEventListener("option-done", function (e) {
          a.remove();
        });
        a.open(okFn, noFn);
      },
      /**
       * 确认提示框
       * @param message
       * @param okFn
       * @param noFn
       */
      confirm: function (message, okFn, noFn) {
        this.confirmDialog(message, okFn, noFn, "confirm");
      },
      /**
       * 提示确认框（带备注）
       * @param message
       * @param okFn
       * @param noFn
       */
      prompt: function (message, okFn, noFn) {
        this.confirmDialog(message, okFn, noFn, "prompt");
      }
    }
  };

</script>